webpackJsonp([16],{"0xDb":function(e,t,a){"use strict";t.a=function(e){return JSON.parse(r()(e))};var n=a("mvHQ"),r=a.n(n)},"70P3":function(e,t,a){"use strict";t.a=function(e){0;return e}},"GtK/":function(e,t,a){"use strict";var n=a("Xxa5"),r=a.n(n),i=a("exGp"),o=a.n(i),c=a("B47v"),s=a("IcnI"),u=a("doyg"),l=a("70P3"),d={props:{display:{type:String,required:!1,default:function(){return s.a.state.env.moduleName}}},setup:function(e,t){var a={envID:-1};return{options:Object(c.d)([]),propConfig:{lazy:!0,lazyLoad:function(e,t){var n=this;return o()(r.a.mark(function i(){var o,c,s,d,v,f,p,m,b,g;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:o=e.level,Object(l.a)("级联懒加载层："+o),n.t0=o,n.next=0===n.t0?5:1===n.t0?11:2===n.t0?19:27;break;case 5:return n.next=7,Object(u.b)();case 7:return c=n.sent,s=c.map(function(e){return{value:e.id,label:e.envName,leaf:o>=2}}),t(s),n.abrupt("break",28);case 11:return d=e.value,a.envID=d,n.next=15,Object(u.a)(d);case 15:return v=n.sent,f=v.map(function(e){return{value:e.id,label:e.centerName,leaf:o>=2}}),t(f),n.abrupt("break",28);case 19:return p=e.value,n.next=22,Object(u.d)(a.envID,p);case 22:return m=n.sent,b=m.list,g=b.map(function(e){return{value:[e.moduleId,e.moduleName],label:e.moduleName,leaf:o>=2}}),t(g),n.abrupt("break",28);case 27:return n.abrupt("break",28);case 28:case"end":return n.stop()}},i,n)}))()}},listChangeHandle:function(e){console.log(e);var t=e[2][0],n=e[2][1];Object(l.a)("环境ID"+a.envID),Object(l.a)("模块ID"+t),Object(l.a)("模块名"+n),s.a.dispatch("env/updateModule",t),s.a.dispatch("env/updateModuleName",n),s.a.dispatch("env/updateEnv",a.envID)}}}},v={render:function(){var e=this.$createElement;return(this._self._c||e)("el-cascader",{staticClass:"custom-cascader",attrs:{options:this.options,"show-all-levels":!1,props:this.propConfig,placeholder:this.display?"当前模块："+this.display:"请选择一个接口测试的全局模块."},on:{change:this.listChangeHandle}})},staticRenderFns:[]};var f=a("VU/8")(d,v,!1,function(e){a("Sx1H")},"data-v-4ff8b254",null);t.a=f.exports},Hu7S:function(e,t,a){"use strict";a.d(t,"b",function(){return m}),a.d(t,"c",function(){return b}),a.d(t,"d",function(){return g}),a.d(t,"a",function(){return h});var n,r,i,o,c=a("Xxa5"),s=a.n(c),u=a("exGp"),l=a.n(u),d=a("tV+W"),v=a("MERw"),f=a("zL8q"),p=(a.n(f),a("IcnI")),m=(n=l()(s.a.mark(function e(){var t,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{asc:!0,column:"name"};return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={current:n,size:i,name:r,order:o},e.next=3,d.a.post("/interfaceClassify/listByName",t);case 3:return a=e.sent,Object(v.b)(a,"获取接口分类失败"),e.abrupt("return",a.result);case 6:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)}),b=(r=l()(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.id){e.next=2;break}return e.abrupt("return");case 2:if(t.moduleId=p.a.state.env.module,t.moduleId&&0!==t.moduleId.length){e.next=6;break}return Object(f.Notification)({title:"提示",message:"请先设置完成环境模块.",type:"warning",duration:3e3}),e.abrupt("return");case 6:return e.next=8,d.a.post("/interfaceClassify/saveOrUpdate",t);case 8:return a=e.sent,Object(v.b)(a,"保存接口分类信息失败"),e.abrupt("return",a.result);case 11:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)}),g=(i=l()(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,d.a.post("/interfaceClassify/saveOrUpdate",t);case 4:return a=e.sent,Object(v.b)(a,"更新接口分类信息失败"),e.abrupt("return",!0);case 7:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)}),h=(o=l()(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.delete("/interfaceClassify/deleteById?id="+t);case 2:return a=e.sent,e.abrupt("return",Object(v.b)(a,"删除接口分类失败"));case 4:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},L414:function(e,t){},Sx1H:function(e,t){},mvHQ:function(e,t,a){e.exports={default:a("qkKv"),__esModule:!0}},"ooL+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("B47v"),r=a("GtK/"),i=a("zL8q"),o=a("Hu7S"),c=a("0xDb"),s=a("70P3");var u=a("FAPO");var l={name:"InterfCategory",components:{ModuleSelector:r.a},setup:function(){var e=Object(n.d)([]),t=Object(n.d)({active:!1,target:{},ref:{}}),a=Object(n.d)({active:!1,target:{}}),r=function(){var e=Object(u.b)(-1),t=e.includes(u.a.InterfaceCategory.Select),a=e.includes(u.a.InterfaceCategory.Add),n=e.includes(u.a.InterfaceCategory.Delete),r=e.includes(u.a.InterfaceCategory.Edit);return t||i.Notification.warning("您没有对该页的浏览权限."),{hasSelect:t,hasAdd:a,hasDelete:n,hasEdit:r}}(),l=r.hasSelect,d=r.hasDelete,v=r.hasAdd,f=r.hasEdit;if(!l)return{categoryData:e,add:a,edit:t};var p=function(e){var t=Object(n.d)(0),a=Object(n.d)(1),r=Object(n.d)(""),c=Object(n.d)(!0),u=setTimeout(function(){},444);return Object(n.c)(function(){return Object(o.b)(a.value,r.value).then(function(a){var n=a.totalItem,r=a.data;t.value=n,Object(s.a)("获得分类的数量: "+t.value),e.value=r,c.value=!1})}),Object(n.f)(r,function(){c.value=!0,clearTimeout(u),u=setTimeout(function(){return Object(o.b)(a.value,r.value).then(function(a){var n=a.totalItem,r=a.data;t.value=n,Object(s.a)("获得分类的数量: "+t.value),e.value=r,c.value=!1})},555)}),{categoryTotal:t,currentPage:a,searchText:r,isLoad:c,deleteHandle:function(a){this.$confirm("确认要删除 '"+e.value[a].name+"' 这个类别?",{title:"Delete",confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.a)(e.value[a].id).then(function(n){n?(i.Notification.success({title:"",dangerouslyUseHTMLString:!0,message:"成功将 <strong>"+e.value[a].name+"</strong> 删除"}),e.value.splice(a,1),t.value--):i.Notification.error("删除失败")})})},changePage:function(n){a.value=n,c.value=!0,Object(o.b)(a.value,r.value).then(function(a){var n=a.data;Object(s.a)("获得分类的数量: "+t.value),e.value=n,c.value=!1})}}}(e),m=p.deleteHandle,b=p.categoryTotal,g=p.searchText,h=p.currentPage,y=p.changePage,x=p.isLoad,O=function(e){return{editOpen:function(t){e.value.active=!0,e.value.ref=t,e.value.target=Object(c.a)(t)},editFormSubmit:function(){var t=e.value.target,a=t.name,n=t.moduleId,r=t.id;Object(o.d)({name:a,moduleId:n,id:r}).then(function(t){if(t){var n=e.value.ref.name;e.value.ref.name=a,e.value.active=!1,i.Notification.success({title:"",dangerouslyUseHTMLString:!0,message:"成功将 <strong>"+n+"</strong> 更新为 <strong>"+a+"</strong>"})}else i.Notification.error("更新失败")})}}}(t),_=O.editOpen,w=O.editFormSubmit,j=function(e){return{addFormSubmit:function(){var t=e.value.target.name;Object(o.c)({name:t}).then(function(a){a&&(i.Notification.success({title:"",dangerouslyUseHTMLString:!0,message:"成功新增分组: <strong>"+t+"</strong>"}),e.value.active=!1,location.reload())})}}}(a);return{hasDelete:d,hasAdd:v,hasEdit:f,edit:t,add:a,categoryData:e,categoryTotal:b,currentPage:h,searchText:g,isLoad:x,changePage:y,deleteHandle:m,editOpen:_,editFormSubmit:w,addFormSubmit:j.addFormSubmit}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-row",[a("el-col",{staticStyle:{"margin-right":"10px"},attrs:{span:5}},[a("module-selector")],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.hasAdd,expression:"hasAdd"}],attrs:{type:"primary"},on:{click:function(t){e.add.active=!0}}},[e._v("\n        添加\n      ")])],1),e._v(" "),a("el-col",{attrs:{span:6,offset:9}},[a("el-input",{attrs:{"prefix-icon":"el-icon-search"},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1)],1),e._v(" "),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoad,expression:"isLoad"}],attrs:{data:e.categoryData}},[a("el-table-column",{attrs:{prop:"name",label:"分类名称"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n          "+e._s(new Date(a.updateTime).toLocaleString().replaceAll("/","-"))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n          "+e._s(new Date(a.createTime).toLocaleString().replaceAll("/","-"))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"actions",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.$index,r=t.row;return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.hasEdit,expression:"hasEdit"}],attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.editOpen(r)}}},[e._v("\n            编辑\n          ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.hasDelete,expression:"hasDelete"}],attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.deleteHandle(n)}}},[e._v("\n            删除\n          ")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":15,layout:"prev, pager, next",total:e.categoryTotal},on:{"current-change":e.changePage}})],1),e._v(" "),a("el-dialog",{attrs:{title:"Edit",visible:e.edit.active,width:"30%"},on:{"update:visible":function(t){return e.$set(e.edit,"active",t)}}},[a("div",{staticClass:"dialog-form"},[a("el-form",[a("el-form-item",{attrs:{label:"分类名:",required:"","label-width":"70px"}},[a("el-input",{model:{value:e.edit.target.name,callback:function(t){e.$set(e.edit.target,"name",t)},expression:"edit.target.name"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.edit.active=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.editFormSubmit}},[e._v("更 新")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"Add",visible:e.add.active,width:"30%"},on:{"update:visible":function(t){return e.$set(e.add,"active",t)}}},[a("div",{staticClass:"dialog-form"},[a("el-form",[a("el-form-item",{attrs:{label:"分类名:",required:"","label-width":"70px"}},[a("el-input",{model:{value:e.add.target.name,callback:function(t){e.$set(e.add.target,"name",t)},expression:"add.target.name"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.add.active=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addFormSubmit}},[e._v("新 增")])],1)])],1)},staticRenderFns:[]};var v=a("VU/8")(l,d,!1,function(e){a("L414")},"data-v-6f67a780",null);t.default=v.exports},qkKv:function(e,t,a){var n=a("FeBl"),r=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}}});