webpackJsonp([27],{"+K44":function(t,a){},"+fAZ":function(t,a,e){"use strict";a.c=function(t){return Object(i.a)({url:"/permission/getAllPermission",method:"get",params:t})},a.a=function(t){return Object(i.a)({url:"/permission/insert",method:"post",data:t})},a.d=function(t){return Object(i.a)({url:"/permission/update",method:"post",data:t})},a.b=function(t){return Object(i.a)({url:"/permission/delete",method:"post",data:t})};var i=e("Vo7i")},ZU4x:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("+fAZ"),o={name:"cuser",data:function(){return{tableData:[],listLoading:!1,queryParams:{keyName:"",beginTime:"",endTime:"",isActive:"",depId:"",pageNum:1,pageSize:10},pages:1,total:1,dialogData:{type:"add",row:{}},formData:{},detailsDialog:!1,formDialog:!1}},mounted:function(){this.getList()},methods:{handleSizeChange:function(t){this.queryParams.pageSize=t,this.getList()},handleCurrentChange:function(t){this.queryParams.pageNum=t,this.getList()},getList:function(){var t=this;t.listLoading=!0,Object(i.c)(t.queryParams).then(function(a){var e=a.data.data,i=a.data.code;if(200===i)t.tableData=e.list,t.total=e.total,t.pages=e.pages,t.queryParams.pageNum=e.pageNum,t.queryParams.pageSize=e.pageSize;else{if("未查询到任何数据"==a.data.msg||201==i)return t.tableData=[],t.total=0,t.queryParams.pageNum=e.pageNum,t.queryParams.pageSize=e.pageSize,void(t.listLoading=!1);200!=i&&(t.tableData=[],t.total=0,t.queryParams.pageNum=e.pageNum,t.queryParams.pageSize=e.pageSize,t.listLoading=!1)}setTimeout(function(){t.listLoading=!1},200)})},openDialog:function(t,a){var e=this;"add"==a&&(this.formDialog=!0,this.dialogData={type:"add",row:{title:"新增权限"}}),"delete"==a&&this.$confirm("确定要删除选中的资源吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.resourceDelete(t)}).catch(function(){e.$message({type:"info",message:"已取消"})}),"detail"==a&&(this.dialogData={type:"detail",row:t},this.detailsDialog=!0),"update"==a&&(this.dialogData={type:"update",row:t},this.formDialog=!0)},closeDetailsDialog:function(){this.dialogData={type:"add",row:{}},this.detailsDialog=!1},closeFormDialog:function(){this.dialogData={type:"add",row:{}},this.formDialog=!1,this.formData={}},permissionCheck:function(t){var a=[];return void 0!=this.envPermission&&this.envPermission.permissionSet&&(a=this.envPermission.permissionSet),a.includes(t)},submit:function(){var t=this,a=new FormData;a.append("action",this.dialogData.row.action),a.append("url",this.dialogData.row.url),a.append("actionName",this.dialogData.row.actionName),"update"==this.dialogData.type&&a.append("id",this.dialogData.row.id),("add"==this.dialogData.type?i.a:i.d)(a).then(function(a){200==a.data.code?(t.getList(),t.formDialog=!1,t.closeFormDialog()):t.$message({message:a.data.msg,type:"error"})})},resourceDelete:function(t){var a=this;Object(i.b)({basePermissionId:t.id}).then(function(t){200==t.data.code?(a.getList(),a.$message({message:t.data.msg,type:"success"})):a.$message({message:t.data.msg,type:"error"})})}},components:{}},s={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("el-main",[e("el-row",{staticClass:"filter-container",attrs:{type:"flex"}},[e("el-input",{staticClass:"input-class",attrs:{clearable:"",placeholder:"输入信息"},model:{value:t.queryParams.keyName,callback:function(a){t.$set(t.queryParams,"keyName",a)},expression:"queryParams.keyName"}}),t._v(" "),e("el-button",{staticClass:"span-other",attrs:{icon:"el-icon-search",type:"primary"},on:{click:t.getList}},[t._v("查询")]),t._v(" "),e("el-button",{attrs:{icon:"el-icon-edit",size:"mini",type:"primary"},on:{click:function(a){return t.openDialog({},"add")}}},[t._v("新增")])],1),t._v(" "),e("el-card",[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"appTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"element-loading-text":"拼命加载中...","highlight-current-row":!0}},[e("el-table-column",{attrs:{align:"center",label:"权限定义中文名",prop:"actionName"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",label:"权限定义字符串",prop:"action"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",label:"创建时间",prop:"createTime"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",label:"修改时间",prop:"updateTime"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{staticClass:"button-m-small",attrs:{size:"mini",type:"success"},on:{click:function(e){return t.openDialog(a.row,"detail")}}},[t._v("详情\n\t\t\t\t\t")]),t._v(" "),e("el-button",{staticClass:"button-m-small",attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.openDialog(a.row,"update")}}},[t._v("修改\n\t\t\t\t\t")]),t._v(" "),e("el-button",{staticClass:"button-m-small",attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.openDialog(a.row,"delete")}}},[t._v("删除\n\t\t\t\t\t")])]}}])})],1)],1),t._v(" "),e("el-footer",[e("div",{staticClass:"pagination-container"},[e("el-pagination",{attrs:{"current-page":t.queryParams.pageNum,"page-count":t.pages,"page-size":t.queryParams.pageSize,"page-sizes":[5,10,15,30,50],total:t.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)]),t._v(" "),e("el-dialog",{attrs:{visible:t.detailsDialog,title:"基础权限详情",top:"5vh","close-on-click-modal":t.elDialogCloseOnClickModal,"destroy-on-close":t.elDialogDestroyOnClose},on:{"update:visible":function(a){t.detailsDialog=a},close:t.closeDetailsDialog}},[e("el-row",{staticClass:"details-row",attrs:{gutter:10,justify:"space-between",type:"flex"}},[e("el-col",{attrs:{span:12}},[e("span",{staticClass:"details-span"},[t._v("权限定义中文名：")]),e("span",[t._v(t._s(t.dialogData.row.actionName))])])],1),t._v(" "),e("el-row",{staticClass:"details-row",attrs:{gutter:10,justify:"space-between",type:"flex"}},[e("el-col",{attrs:{span:12}},[e("span",{staticClass:"details-span"},[t._v("权限定义字符串：")]),e("span",[t._v(t._s(t.dialogData.row.action))])])],1),t._v(" "),e("el-row",{staticClass:"details-row",attrs:{gutter:10,justify:"space-between",type:"flex"}},[e("el-col",{attrs:{span:12}},[e("span",{staticClass:"details-span"},[t._v("权限定义url路径：")]),e("span",[t._v(t._s(t.dialogData.row.url))])])],1),t._v(" "),e("el-row",{staticClass:"details-row",attrs:{gutter:10,justify:"space-between",type:"flex"}},[e("el-col",{attrs:{span:12}},[e("span",{staticClass:"details-span"},[t._v("创建时间：")]),e("span",[t._v(t._s(t.dialogData.row.createTime))])])],1),t._v(" "),e("el-row",{staticClass:"details-row",attrs:{gutter:10,justify:"space-between",type:"flex"}},[e("el-col",{attrs:{span:12}},[e("span",{staticClass:"details-span"},[t._v("修改时间：")]),e("span",[t._v(t._s(t.dialogData.row.updateTime))])])],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.closeDetailsDialog}},[t._v("关闭")])],1)],1),t._v(" "),e("el-dialog",{attrs:{visible:t.formDialog,title:t.dialogData.row.title,top:"5vh","close-on-click-modal":t.elDialogCloseOnClickModal,"destroy-on-close":t.elDialogDestroyOnClose},on:{"update:visible":function(a){t.formDialog=a},close:t.closeFormDialog}},[e("el-form",{ref:"addModule",staticStyle:{width:"100%","max-height":"70vh","overflow-y":"auto","overflow-x":"hidden",padding:"0 5px"},attrs:{model:t.formData,"label-position":"left","label-width":"100px"}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"权限定义中文名：",prop:"basePerName"}},[e("el-input",{model:{value:t.dialogData.row.actionName,callback:function(a){t.$set(t.dialogData.row,"actionName",a)},expression:"dialogData.row.actionName"}})],1)],1)],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"权限定义字符串：",prop:"basePerCode"}},[e("el-input",{model:{value:t.dialogData.row.action,callback:function(a){t.$set(t.dialogData.row,"action",a)},expression:"dialogData.row.action"}})],1)],1)],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"权限定义url路径：",prop:"remark"}},[e("el-input",{model:{value:t.dialogData.row.url,callback:function(a){t.$set(t.dialogData.row,"url",a)},expression:"dialogData.row.url"}})],1)],1)],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.closeFormDialog}},[t._v("关闭")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确定")])],1)],1)],1)],1)},staticRenderFns:[]};var l=e("VU/8")(o,s,!1,function(t){e("+K44")},"data-v-62e1167a",null);a.default=l.exports}});