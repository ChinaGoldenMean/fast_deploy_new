webpackJsonp([28],{"8Pm4":function(e,a,t){"use strict";a.d=function(e){return Object(s.a)({url:"/pUser/page/all",method:"get",params:e})},a.a=function(e){return Object(s.a)({url:"/pUser/register",method:"post",data:e})},a.b=function(e){return Object(s.a)({url:"/pUser/info/"+e,method:"get"})},a.e=function(e){return Object(s.a)({url:"/pUser/updateOne",method:"post",data:e})},a.c=function(e){return Object(s.a)({url:"/pUser/deleteUserInfo",method:"post",params:e})};var s=t("Vo7i")},nL32:function(e,a){},qiFi:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=t("8Pm4"),n={name:"cuser",data:function(){return{passwordPercent:0,tableData:[],listLoading:!1,queryParams:{keyName:"",beginTime:"",endTime:"",isActive:"",depId:"",pageNum:1,pageSize:10},pages:1,total:1,dialogData:{type:"add",row:{}},formData:{envuname:"",envcname:"",envpwd:"",envpname:"",envfname:"",envlname:"",envpnum:"",envemail:"",envqq:"",envwechat:"",envremark:"",id:""},rules:{envuname:[{required:!0,message:"请输入",trigger:"blur"}],envpwd:[{required:!0,message:"请输入",trigger:"blur"}]},detailsDialog:!1,formDialog:!1,msgText:""}},mounted:function(){this.getList()},methods:{envpwdCheck:function(e){this.msgText=this.checkStrong(e),this.msgText>1||1==this.msgText?document.getElementById("one").style.background="red":document.getElementById("one").style.background="#eee",this.msgText>2||2==this.msgText?document.getElementById("two").style.background="orange":document.getElementById("two").style.background="#eee",4==this.msgText?document.getElementById("three").style.background="#00D1B2":document.getElementById("three").style.background="#eee"},checkStrong:function(e){var a=0;if(void 0==e||e.length<1)return a;switch(/\d/.test(e)&&a++,/[a-z]/.test(e)&&a++,/[A-Z]/.test(e)&&a++,/\W/.test(e)&&a++,a){case 1:return 1;case 2:return 2;case 3:case 4:return e.length<4?3:4}return a},handleSizeChange:function(e){this.queryParams.pageSize=e,this.getList()},handleCurrentChange:function(e){this.queryParams.pageNum=e,this.getList()},getList:function(){var e=this;e.listLoading=!0,Object(s.d)(e.queryParams).then(function(a){var t=a.data.data,s=a.data.code;if(200===s)e.tableData=t.list,e.total=t.total,e.pages=t.pages,e.queryParams.pageNum=t.pageNum,e.queryParams.pageSize=t.pageSize;else{if("未查询到任何数据"==a.data.msg||201==s)return e.tableData=[],e.total=0,e.queryParams.pageNum=t.pageNum,e.queryParams.pageSize=t.pageSize,void(e.listLoading=!1);200!=s&&(e.tableData=[],e.total=0,e.queryParams.pageNum=t.pageNum,e.queryParams.pageSize=t.pageSize,e.listLoading=!1)}setTimeout(function(){e.listLoading=!1},200)})},openDialog:function(e,a){var t=this;"add"==a&&(this.formDialog=!0,this.dialogData={type:"add",row:{title:"新增用户"}}),"detail"==a&&Object(s.b)(e.id).then(function(a){var s=a.data.code;a.data.data;if(200===s)t.dialogData={type:"detail",row:e},t.detailsDialog=!0;else{var n=a.data.msg;t.$message({message:n,type:"error"})}}),"update"==a&&(this.formData={envuname:e.username,envcname:e.cname,envpwd:e.password,envpname:e.nickname,envfname:e.firstName,envlname:e.lastName,envpnum:e.mobile,envemail:e.email,envqq:e.qq,envwechat:e.wxcode,envremark:e.remark,id:e.id},this.formDialog=!0,this.dialogData={type:"update",row:{title:"修改用户",data:e}}),"delete"==a&&this.$confirm("确定要删除选中的资源吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.resourceDelete(e)}).catch(function(){t.$message({type:"info",message:"已取消"})})},closeDetailsDialog:function(){this.dialogData={type:"add",row:{}},this.detailsDialog=!1},closeFormDialog:function(){this.dialogData={type:"add",row:{}},this.formDialog=!1,this.formData={}},permissionCheck:function(e){var a=[];return void 0!=this.envPermission&&this.envPermission.permissionSet&&(a=this.envPermission.permissionSet),a.includes(e)},submit:function(e){var a=this;this.$refs[e].validate(function(e){if(e)if(a.formData.repassword==a.formData.envpwd)if(a.checkStrong(a.formData.envpwd)<4)a.$message({message:"请设置复杂的密码",type:"error"});else{var t=new FormData;t.append("username",a.formData.envuname),t.append("cname",a.formData.envcname),t.append("password",a.formData.envpwd),t.append("nickname",a.formData.envpname),t.append("firstName",a.formData.envfname),t.append("lastName",a.formData.envlname),t.append("mobile",a.formData.envpnum),t.append("email",a.formData.envemail),t.append("qq",a.formData.envqq),t.append("wxcode",a.formData.envwechat),t.append("remark",a.formData.envremark),"update"==a.dialogData.type&&t.append("id",a.dialogData.row.data.id),("add"==a.dialogData.type?s.a:s.e)(t).then(function(e){200==e.data.code?(a.getList(),a.formDialog=!1,a.closeFormDialog()):a.$message({message:e.data.msg,type:"error"})})}else a.$message({message:"密码不一致",type:"error"})})},resourceDelete:function(e){var a=this;Object(s.c)({userId:e.id}).then(function(e){200==e.data.code?(a.getList(),a.$message({message:e.data.msg,type:"success"})):a.$message({message:e.data.msg,type:"error"})})}},components:{},watch:{}},l={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("el-main",[t("el-row",{staticClass:"filter-container",attrs:{type:"flex"}},[t("el-input",{staticClass:"input-class",attrs:{clearable:"",placeholder:"输入信息"},model:{value:e.queryParams.keyName,callback:function(a){e.$set(e.queryParams,"keyName",a)},expression:"queryParams.keyName"}}),e._v(" "),t("el-button",{staticClass:"span-other",attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.getList}},[e._v("查询")]),e._v(" "),t("el-button",{attrs:{icon:"el-icon-edit",size:"mini",type:"primary"},on:{click:function(a){return e.openDialog({},"add")}}},[e._v("新增")]),e._v(" "),t("el-button",{attrs:{icon:"el-icon-edit",size:"mini",type:"primary"},on:{click:function(a){return e.openDialog({},"add")}}},[e._v("导出")])],1),e._v(" "),t("el-card",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"appTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"element-loading-text":"拼命加载中...","highlight-current-row":!0}},[t("el-table-column",{attrs:{align:"center",label:"序号",type:"index",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n            "+e._s(a.$index+1+e.queryParams.pageSize*(e.queryParams.pageNum-1))+"\n          ")]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"姓名",prop:"cname"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"用户名",prop:"username"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"手机号码",prop:"mobile"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"邮箱",prop:"email"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"QQ号",prop:"qq"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"微信号",prop:"wxcode"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"备注",prop:"remark"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{staticClass:"button-m-small",attrs:{size:"mini",type:"success"},on:{click:function(t){return e.openDialog(a.row,"detail")}}},[e._v("详情\n            ")]),e._v(" "),t("el-button",{staticClass:"button-m-small",attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.openDialog(a.row,"update")}}},[e._v("修改\n            ")]),e._v(" "),t("el-button",{staticClass:"button-m-small",attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.openDialog(a.row,"delete")}}},[e._v("删除\n            ")])]}}])})],1)],1),e._v(" "),t("el-footer",[t("div",{staticClass:"pagination-container"},[t("el-pagination",{attrs:{"current-page":e.queryParams.pageNum,"page-count":e.pages,"page-size":e.queryParams.pageSize,"page-sizes":[5,10,15,30,50],total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)]),e._v(" "),t("el-dialog",{attrs:{visible:e.detailsDialog,title:"用户详情",top:"5vh","close-on-click-modal":e.elDialogCloseOnClickModal,"destroy-on-close":e.elDialogDestroyOnClose},on:{"update:visible":function(a){e.detailsDialog=a},close:e.closeDetailsDialog}},[t("el-row",{staticClass:"details-row",attrs:{gutter:10,justify:"space-between",type:"flex"}},[t("el-col",{attrs:{span:12}},[t("span",{staticClass:"details-span"},[e._v("用户名：")]),t("span",[e._v(e._s(e.dialogData.row.username))])]),e._v(" "),t("el-col",{attrs:{span:12}},[t("span",{staticClass:"details-span"},[e._v("姓名：")]),t("span",[e._v(e._s(e.dialogData.row.cname))])])],1),e._v(" "),t("el-row",{staticClass:"details-row",attrs:{gutter:10,justify:"space-between",type:"flex"}},[t("el-col",{attrs:{span:12}},[t("span",{staticClass:"details-span"},[e._v("密码：")]),t("span",[e._v(e._s(e.dialogData.row.passsword))])]),e._v(" "),t("el-col",{attrs:{span:12}},[t("span",{staticClass:"details-span"},[e._v("昵称：")]),t("span",[e._v(e._s(e.dialogData.row.nickname))])])],1),e._v(" "),t("el-row",{staticClass:"details-row",attrs:{gutter:10,justify:"space-between",type:"flex"}},[t("el-col",{attrs:{span:12}},[t("span",{staticClass:"details-span"},[e._v("首名字：")]),t("span",[e._v(e._s(e.dialogData.row.firstName))])]),e._v(" "),t("el-col",{attrs:{span:12}},[t("span",{staticClass:"details-span"},[e._v("尾名字：")]),t("span",[e._v(e._s(e.dialogData.row.lastName))])])],1),e._v(" "),t("el-row",{staticClass:"details-row",attrs:{gutter:10,justify:"space-between",type:"flex"}},[t("el-col",{attrs:{span:12}},[t("span",{staticClass:"details-span"},[e._v("手机号码：")]),t("span",[e._v(e._s(e.dialogData.row.mobile))])]),e._v(" "),t("el-col",{attrs:{span:12}},[t("span",{staticClass:"details-span"},[e._v("邮箱：")]),t("span",[e._v(e._s(e.dialogData.row.email))])])],1),e._v(" "),t("el-row",{staticClass:"details-row",attrs:{gutter:10,justify:"space-between",type:"flex"}},[t("el-col",{attrs:{span:12}},[t("span",{staticClass:"details-span"},[e._v("QQ号：")]),t("span",[e._v(e._s(e.dialogData.row.qq))])]),e._v(" "),t("el-col",{attrs:{span:12}},[t("span",{staticClass:"details-span"},[e._v("微信号：")]),t("span",[e._v(e._s(e.dialogData.row.wxcode))])])],1),e._v(" "),t("el-row",{staticClass:"details-row",attrs:{gutter:10,justify:"space-between",type:"flex"}},[t("el-col",{attrs:{span:12}},[t("span",{staticClass:"details-span"},[e._v("备注：")]),t("span",[e._v(e._s(e.dialogData.row.remark))])])],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.closeDetailsDialog}},[e._v("关闭")])],1)],1),e._v(" "),t("el-dialog",{attrs:{visible:e.formDialog,title:e.dialogData.row.title,top:"5vh","close-on-click-modal":e.elDialogCloseOnClickModal,"destroy-on-close":e.elDialogDestroyOnClose},on:{"update:visible":function(a){e.formDialog=a},close:e.closeFormDialog}},[t("el-form",{ref:"formData",staticStyle:{width:"100%","max-height":"70vh","overflow-y":"auto","overflow-x":"hidden",padding:"0 5px"},attrs:{model:e.formData,rules:e.rules,"label-position":"left","label-width":"100px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"用户名：",prop:"username"}},[t("el-input",{attrs:{required:!0},model:{value:e.formData.envuname,callback:function(a){e.$set(e.formData,"envuname",a)},expression:"formData.envuname"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"姓名：",prop:"cname"}},[t("el-input",{model:{value:e.formData.envcname,callback:function(a){e.$set(e.formData,"envcname",a)},expression:"formData.envcname"}})],1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"密码：",prop:"passwrod"}},[t("el-input",{attrs:{type:"password",required:!0,minlength:"8",maxlength:"20",placeholder:"8-20位,包含数字、小写、大写字母以及特殊字符"},on:{change:e.envpwdCheck},model:{value:e.formData.envpwd,callback:function(a){e.$set(e.formData,"envpwd",a)},expression:"formData.envpwd"}})],1)],1),e._v(" "),t("br"),e._v(" "),t("div",{staticClass:"input_span"},[t("label",{staticStyle:{"margin-left":"40px"}},[e._v("强度:")]),e._v(" "),t("span",{attrs:{id:"one"}}),e._v(" "),t("span",{attrs:{id:"two"}}),e._v(" "),t("span",{attrs:{id:"three"}})]),e._v(" "),t("div",{attrs:{id:"font"}},[t("span",[e._v("弱")]),e._v(" "),t("span",[e._v("中")]),e._v(" "),t("span",[e._v("强")])])],1),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"重复密码：",prop:"passwrod"}},[t("el-input",{attrs:{required:!0,minlength:"8",maxlength:"20",type:"password",placeholder:"8-20位,包含数字、小写、大写字母以及特殊字符"},model:{value:e.formData.repassword,callback:function(a){e.$set(e.formData,"repassword",a)},expression:"formData.repassword"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"邮箱：",prop:"email"}},[t("el-input",{model:{value:e.formData.envemail,callback:function(a){e.$set(e.formData,"envemail",a)},expression:"formData.envemail"}})],1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"首名字：",prop:"firstName"}},[t("el-input",{model:{value:e.formData.envfname,callback:function(a){e.$set(e.formData,"envfname",a)},expression:"formData.envfname"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"尾名字：",prop:"lastName"}},[t("el-input",{model:{value:e.formData.envlname,callback:function(a){e.$set(e.formData,"envlname",a)},expression:"formData.envlname"}})],1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"手机号码：",prop:"mobile"}},[t("el-input",{model:{value:e.formData.envpnum,callback:function(a){e.$set(e.formData,"envpnum",a)},expression:"formData.envpnum"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"昵称：",prop:"nickname"}},[t("el-input",{model:{value:e.formData.envpname,callback:function(a){e.$set(e.formData,"envpname",a)},expression:"formData.envpname"}})],1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"QQ号：",prop:"qq"}},[t("el-input",{model:{value:e.formData.envqq,callback:function(a){e.$set(e.formData,"envqq",a)},expression:"formData.envqq"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"微信号：",prop:"wxcode"}},[t("el-input",{model:{value:e.formData.envwechat,callback:function(a){e.$set(e.formData,"envwechat",a)},expression:"formData.envwechat"}})],1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[t("el-input",{model:{value:e.formData.envremark,callback:function(a){e.$set(e.formData,"envremark",a)},expression:"formData.envremark"}})],1)],1)],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeFormDialog}},[e._v("关闭")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.submit("formData")}}},[e._v("确定")])],1)],1)],1)],1)},staticRenderFns:[]};var r=t("VU/8")(n,l,!1,function(e){t("nL32")},"data-v-554b6f90",null);a.default=r.exports}});